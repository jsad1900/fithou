---
layout: post
title:  "SETNJA - Setnja"
categories: [bignum, brute-force, dp]
code: SETNJA
src: SETNJA.java
---

Gọi `F[i]` là tổng cần tìm đến vị trí thứ i, nhận xét một chút:

<img src="/static/img/posts/SETNJA.jpg">

Nếu kí tự thứ i là P thì chỉ đơn giản `F[i] = F[i-1]`.

Nếu kí tự thứ i là L thì chỉ việc : `F[i] = 2F[i-1]`.

Chi có trường hợp kí tự thứ i là R với * là cần xử lí đặc biệt. Nhìn vào hình vẽ trên ta có thể thấy. Khi là R thì theo nguyên tắc tổng các nhánh bằng 2 lần nhánh trước đó cộng 1, hay nói cách khác là 2F[i-1] cộng với số nhánh hiện tại. Tương tự như vậy, khi là * thì mỗi nhánh x[i] sẽ bằng 3 trường hợp khi nó là P L R, tức là x[i-1], 2x[i-1], 2x[i-1]+1, tức là 5x[i-1]+1, mà cộng các nhánh lại tức là 5F[i-1] + số nhánh hiện tại. 

Còn tính số nhánh, nhìn vào hình vẽ thì số nhánh chỉ tạo ra khi gặp *, tức là chỉ tạo mọt biến cnt, khi gặp * thì cnt *= 3.

Do N lớn nên cài số lớn cho bài toán này. Nhưng thời gian khá chặt nên dùng Java cho chắc chắn ko TLE ☺. (tại mình cài C++ bị TLE ☺)
